<!DOCTYPE html>
<html>
<style>
body, input {font-family: verdana; font-size: 20px}
#f {width: 600px}
</style>
<script type="text/javascript" charset="utf-8" src="audio.js"></script>
<script type="text/javascript" charset="utf-8" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js"></script>
 
<script>
var data = [];
var sampleRate = 44100;

$(window).bind('hashchange', function() {
	$('#f').val(window.location.hash.substr(1));
});

$(function () {
	if (window.location.hash.length>0)
	{
		$('#f').val(window.location.hash.substr(1));
	}
});

function generateData()
{
	data = [];
	sampleRate = parseInt($('#s').val());
	var code = 'for (var t=0; t<' + $('#n').val() + '; t++) data[t] = ' + $('#f').val() + ';';
	eval(code);
	$('#b').val('Encoding...');
	setTimeout(encode, 1);
}

function encode()
{
	var dataUri = encodeAudio8bit(data);
	$('#b').val('Generate and play');
	var ap = $('#pl').attr({ src: dataUri });
	ap[0].play();
}

function generate()
{
	$('#b').val('Generating...');
	setTimeout(generateData, 1);
}

</script>
<body>
	Formula: 
	<input type="text" id="f" value="t*((t>>12|t>>8)&63&t>>4)" />
	<br/>
	Sample rate: 
	<input type="text" id="s" value="88200" />
	<br/>
	Number of samples (length): 
	<input type="text" id="n" value="500000" />
	<br/>
	<input type="button" id="b" value="Generate and play" onClick="generate()" />
	<br/>
	<br/>
	<audio controls="controls" id="pl"></audio>
</body>
</html>
